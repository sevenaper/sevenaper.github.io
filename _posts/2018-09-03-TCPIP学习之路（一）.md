---
title: TCP/IP学习之路（一）：概述
key: 20180903
tags: 计算机网络 TCP/IP 
---

# 概述

## 体系结构原则

TCP/IP协议族允许计算机、智能手机和嵌入式设备之间通信，它们可以采用各种尺寸来自不同计算机生产厂商和运行各种软件。Internet体系结构的建立时在几个目标下。在[C88]中，Clark描述首要目标是“发展一种重复利用已有的互联网络的技术”。基于这个目标，Clark提供了以下的二级目标列表：

* Internet通信在网络或网关失效时必须能持续
* Internet必须支持多种类型的通信服务
* Internet体系结构必须兼容多种网络
* Internet体系结构必须是经济有效的
* Internet体系结构必须允许低能力主机的连接
* Internet中使用的资源必须是课统计的

### 分组、连接和数据报

在分组交换中，包含一定字节数的数字信息“块”独立通过网络。来自不同来源或发送方的块可以组合，而且以后可以分解，这称为“多路复用”。这些快在到达目的地的过程中。需要在变换设备之间传输，并且路径可以改变。

当一个应用将多个信息块发送到网络中，这些信息快可能被通信协议保留，也可能不被通信协议保留。大多数数据报协议保存消息边界。保护消息边界，就是指传输协议把数据当作一条独立的消息在网上  传输,接收端只能接收独立的消息.也就是说存在保护消息边界,接收  端一次只能接收发送端发出的一个数据包。

### 端到端论点和命运共享

端到端观点认为重要功能（差错控制、加密、交付确认等）通常不会在大型系统的低层实现。但是，底层可以提供方便端系统工作的功能，并最终可能改善性能。很多功能在端主机的应用程序中实现。选择哪些功能在同一计算机、网络或软件栈中实现。

命运共享建议所有的必要状态放在通信端点，这些状态用于维护一个活动的通信关联。

### 差错控制和流量控制

针对网络中可靠、按顺序交付的实现开销，栈中继和Internet协议采用一种称为尽力而为的服务。在尽力而为的交付中，网络不会花费很大的努力来保证数据在没有差错或却显得情况下交付。某些差错通常用差错检验码或校验和来检测。当检测到这种错误时，出错的数据报仅仅被丢弃而没有进一步行动。

## 设计和实现

### 分层

通过分层，每层只负责通信的一个方面。尽管OSI模型建议的7个逻辑层在协议体系结构的模块化实现中时可取的，但是通常认为TCP/IP体系结构包含5层。

| OSI七层网络模型         | TCP/IP四层概念模型                   | 对应网络协议                            |
| ----------------------- | ------------------------------------ | --------------------------------------- |
| 应用层（Application）   | 应用层                               | HTTP、TFTP, FTP, NFS, WAIS、SMTP        |
| 表示层（Presentation）  | Telnet, Rlogin, SNMP, Gopher         |                                         |
| 会话层（Session）       | SMTP, DNS                            |                                         |
| 传输层（Transport）     | 传输层                               | TCP, UDP                                |
| 网络层（Network）       | 网络层                               | IP, ICMP, ARP, RARP, AKP, UUCP          |
| 数据链路层（Data Link） | 数据链路层                           | FDDI, Ethernet, Arpanet, PDN, SLIP, PPP |
| 物理层（Physical）      | IEEE 802.1A, IEEE 802.2到IEEE 802.11 |                                         |

 

 ### 分层实现中的复用、分解和封装

复用可以发生在不同层，并且每层都有不同类型的标识符，用来确定信息属于哪个协议或信息流。

![Alt text](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1536599635935&di=5e0911252b50593bdee396c5cddf5af8&imgtype=0&src=http%3A%2F%2Ftxt15.book118.com%2F2017%2F0419%2Fbook100818%2F100817362.jpg)

## TCP/IP协议族

### TCP/IP中的复用、分解和封装

![Alt text](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1536599855174&di=47fce8dc184c4036916b5f70954a82d9&imgtype=0&src=http%3A%2F%2Fs3.51cto.com%2Fwyfs02%2FM01%2F83%2FD2%2FwKiom1d9sWDzFENeAAH9x4Gersw028.jpg-wm_1-wmp_4-s_1279576696.jpg)

如果接收到的帧含一个IP书包，以太网头部和尾部信息将被请出，并将剩余字节交给IP来处理。根据检测的8位IPv4协议字段，决定使用哪一个协议来处理

### 端口号

端口号范围是0~65535，没有任何物理意义。端口其实就是队，操作系统为各个进程分配了不同的队，数据包按照目的端口被推入相应的队中，等待被进程取用，在极特殊的情况下，这个队也是有可能溢出的，不过操作系统允许各进程指定和调整自己的队的大小。

不光接受数据包的进程需要开启它自己的端口，发送数据包的进程也需要开启端口，这样，数据包中将会标识有源端口，以便接受方能顺利地回传数据包到这个端口。

### 名称、地址和DNS

在TCP/IP中，每个链路层至少有一个IP地址。在TCP/IP环境中，DNS是一个分布式数据库，提供**主机名和IP地址之间的映射**